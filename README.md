開発ログ

Phase 1: プロジェクトの着想と基本設計 (2025年6月中旬-7月上旬)
目的: 自身の就職活動における応募情報管理の非効率性を解決するため、一元管理Webアプリケーションの開発を決定。

技術選定: 迅速な開発と堅牢性を両立できるPythonのDjangoフレームワークをバックエンドに選定。UIはBootstrap 5を利用し、レスポンシブデザインに対応させる方針を固める。

データベース設計:
ユーザー情報を管理するDjango標準のUserモデルを拡張するため、スキルや経歴を保存するUserProfileモデルをUserモデルと関連付け。
アプリケーションの中核となるJobApplicationモデル、提出書類を管理するDocumentモデルを設計。

初期機能実装:
上記モデルに対する基本的なCRUD（作成・読み取り・更新・削除）機能を実装。
UserCreationFormを継承したカスタムフォームを作成し、ユーザー登録機能を実装。今回はメール配信サービスの利用を想定しておらず、登録後即時ログインするシンプルな仕様を採用。

Phase 2: コア機能の実装とAPI連携 (2025年7月中旬)
AI機能の実装:
アプリケーションの独自価値として、OpenAI API (GPT-4) を利用した「志望動機ドラフト生成機能」を実装。当初は、応募情報詳細ページでユーザーが都度スキル情報を入力する仕様で構築。

API連携の調査と変更:
企業情報入力の自動化を目指し、当初は国税庁の法人番号APIを検討。しかし、利用申請に時間がかかることが判明したため、開発速度を優先し、代替案を調査。
そこでAPIキーが不要で即時利用可能なWikidata APIを発見し、技術選定を変更。requestsライブラリを用いて、企業名入力時のオートコンプリート機能を実装。

入力UIの改善:
ユーザーの企業情報記録時の利便性を考えモデルのverbose_nameとhelp_textを全面的に見直し、UIの分かりやすさを向上。
職種カテゴリの入力を、既存の選択肢と自由記述を両立させるハイブリッド方式に変更。ManyToManyFieldとCharFieldを組み合わせ、ビュー側でget_or_createを用いて動的にタグを生成するロジックを構築。

Phase 3: 品質保証と信頼性の確立 (2025年7月中旬)
テストの導入:
アプリケーションの品質と保守性を高めるため、Djangoの標準テストフレームワークを導入。

モデルテスト: __str__メソッドの出力や、auto_now_addフィールドの動作を検証。
フォームテスト: 有効なデータと無効なデータの両方をテストし、バリデーションが正しく機能することを確認。

ビューテスト:
認証・認可: 未ログインユーザーのリダイレクトや、ユーザー間でデータが分離されていること（他人の情報にアクセスできないこと）を保証する、重要なセキュリティテストを実装。

CRUD機能テスト: 各機能がデータベースと正しく連携しているかを、オブジェクト数の増減やリダイレクト先を検証することで確認。

外部APIのモックテスト:
テストの安定性と速度を確保するため、unittest.mock.patchを用いてOpenAI APIへのリクエストをモック化。APIの成功時・失敗時の両方のシナリオで、アプリケーションが意図通りに振る舞うことをテストした。

Phase 4: 大規模な機能拡張とリファクタリング (2025年7月下旬)
面接ログ機能の追加:
ユーザーの活動記録をより詳細に管理するため、JobApplicationと1対多の関係を持つInterviewLogモデルを新たに設計・追加。専用のCRUDビューとテンプレートを実装。

AI機能のリファクタリング:
当初の「志望動機ドラフト機能」を、より具体的で実践的なES設問回答支援機能に発展させた。
新たにEntrySheetモデルを追加し、設問ごとに回答案を管理できるようにデータベース構造を変更。
AIへのプロンプトを、単なるスキル情報だけでなく、ユーザープロフィール全体と、応募情報に記録された経営理念や求める人物像を組み合わせるように改良。これにより、生成される回答の質とパーソナライズ精度を大幅に向上させた。

Phase 5: 本番環境へのデプロイと運用 (2025年7月下旬)
本番環境用の構成:
デプロイ先としてRender（Freeプラン）を選定。本番データベースにはRenderで推奨されているPostgreSQLを採用。
本番用WebサーバーとしてGunicorn、静的ファイル配信ライブラリとしてWhiteNoiseを導入。

セキュリティと構成管理:
APIキーなどの情報を、django-environを用いて.envファイルに完全分離。.gitignoreの設定。

デプロイプロセスの自動化:
**render.yamlとbuild.sh**を作成し、依存関係のインストール (pip install)、静的ファイルの収集 (collectstatic)、データベースのマイグレーション (migrate) といった一連のデプロイ作業をコード化・自動化。

デプロイ時のトラブルシューティング:
ALLOWED_HOSTSの設定漏れによる400 Bad Requestエラー、ビルドコマンドの設定ミスによるrelation "..." does not existエラーなど、デプロイ時に発生しがちな典型的な問題を、サーバーログを分析することで特定し、一つずつ解決した。
